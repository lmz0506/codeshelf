# codeshelf
代码书架 - 本地项目管理工具

# 技术栈
- 桌面端框架：Tauri (Rust 后端 + Web 前端)
- 前端框架：React 19 + TypeScript
- 样式方案：Tailwind CSS
- Git 操作：simple-git (Node.js) 通过 Tauri Command 调用
- 状态管理：Zustand / React Query
- 数据存储：Tauri FS API + SQLite (via tauri-plugin-sql)

# 核心功能模块

## 1. 项目书架（Shelf View）
1. 网格化卡片展示本地项目，支持列表/网格切换
2. 卡片信息：项目名称、本地路径、关联远程仓库、最后修改时间、未推送提交数、分支状态
3. 左侧目录树分组（物理文件夹结构）
4. 快速搜索、标签筛选、收藏置顶（Top Shelf）

## 2. Git 数据统计
1. 编码足迹热力图：基于 commit 历史生成每日活跃度（绿色渐变 #0e4429 → #39d353）
2. 仪表盘指标：总项目数、今日编码时长、本周提交数、待推送提交数、未合并分支数
3. 项目详情页：提交历史图表、分支可视化图谱、贡献者统计（单人项目显示个人趋势）

## 3. 远程仓库管理
1. 远程配置：查看/添加/修改/删除远程仓库地址（origin 及其他）
2. 远程状态检测：自动检测远程可访问性、分支差异、落后/领先提交数
3. 快捷操作：
   3.1 一键打开远程仓库网页（GitHub/GitLab/Gitee 等）
   3.2 一键打开本地开发工具（VSCode/IDEA 等）
4. 强制同步策略（核心功能)
   4.1 本地 → 远程强制推送
     ```
      场景：将当前代码强制覆盖到指定远程仓库
      操作：
      1. 选择目标远程仓库（支持添加新远程地址）
      2. 选择推送模式：普通推送 / 强制推送 (--force)
      3. 确认当前分支与远程分支的冲突风险（预览差异）
      4. 执行推送，记录操作日志
      风险管控：强制推送前必须二次确认，显示即将被覆盖的远程提交
     ```
   4.2 远程 → 本地全分支同步
     ```
        场景：将远程仓库所有分支完整同步到本地，或迁移到新远程
        操作：
        1. 选择源远程仓库
        2. 选择目标：更新现有远程 / 推送到新远程地址
        3. 扫描源远程所有分支（包括远端追踪分支）
        4. 执行策略：
           - 拉取所有分支最新状态
           - 批量推送到目标远程（保持分支结构）
           - 或本地创建对应追踪分支
        冲突处理：如遇分支名冲突，提示重命名或跳过
     ```
   4.3 仓库迁移模式
     ```
      场景：完整迁移仓库到新的代码托管平台
      操作：
      1. 添加新远程地址（new-origin）
      2. 推送所有本地分支到新远程
      3. 推送所有标签到新远程
      4. 可选：切换远程 URL（替换 origin）
     ```
   4.4 安全的拉取更新（Pull）
     ```
       冲突处理流程
         - 预检发现不可自动合并 → 中止操作
         - 弹出提示："检测到合并冲突，请在 IDEA 中手动处理"
         - 提供按钮：【打开 IDEA】 【查看差异】 【取消】
         - 自动回滚：如已部分下载，执行 git merge --abort 或 git reset --merge 恢复之前状态
         - 记录失败日志，标记项目状态为"需处理"
     ```
       
   
   
